# Структура проекта GOAT с интеграцией ИИ

# Эта обновлённая структура проекта GOAT включает в себя различных интеллектуальных агентов, таких как DataAgent, TradingAgent, RiskAgent, 
# MLAgent, SentimentAgent и MonitoringAgent. Ниже представлена рекомендуемая структура папок проекта для лучшей организации и повышения эффективности.

GOAT_Project/
├── .venv/                             # Виртуальная среда проекта.
├── agents/
│   ├── __init__.py
│   ├── data_agent.py                 # Обработка загрузки исторических данных.
│   ├── trading_agent.py              # Генерация торговых сигналов на основе стратегии GOAT.
│   ├── risk_agent.py                 # Расчёт риска на основе баланса, текущей цены и стоп-лосса.
│   ├── executor_agent.py             # Исполнение ордеров на бирже.
│   ├── sentiment_agent.py            # Использует NLP для анализа новостей рынка и оценки настроения.
│   └── monitoring_agent.py           # Отслеживание и логирование текущих позиций.
├── data/
│   └── historical_data/              # Хранение исторических данных для анализа.
├── hub/
│   ├── hub.py                        # Центральное управление данными и агентами.
│   └── models/                       # Модели для аналитики и машинного обучения.
├── strategies/
│   ├── __init__.py
│   └── goat_strategy.py              # Торговая стратегия GOAT.
├── test/
│   └── main_test.py                  # Тестирование функциональности проекта.
├── utils/
│   ├── __init__.py
│   ├── data_loader.py                # Загрузка и обработка исторических данных.
│   ├── risk_management.py            # Утилиты для управления рисками.
│   ├── trade_executor.py             # Функции для исполнения торговых операций.
│   ├── update-requirements.py        # Скрипт для обновления зависимостей.
│   └── logging_util.py               # Утилиты для логирования.
├── config.py                         # Настройки конфигурации, включая API-ключи и параметры стратегии.
├── main.py                           # Основной скрипт для инициализации агентов и выполнения торговой логики.
├── requirements.txt                  # Зависимости проекта.
├── README.md                         # Документация по настройке и запуску проекта.
├── README_detailed_ru.md             # Подробная документация на русском языке.
└── README_ru.md                      # Основная документация на русском языке.




# GOAT Trader Bot с Многоагентной Архитектурой

Этот проект реализует алгоритмического торгового бота с использованием стратегии GOAT и многоагентной архитектуры. 
Система построена на нескольких интеллектуальных агентах, включая самообучающихся агентов, для анализа данных, 
управления рисками и выполнения сделок на бирже Binance.

## Структура Проекта

- **agents/**: Папка с различными агентами для торговли, управления рисками, загрузки данных, анализа сентимента и выполнения сделок.
- **hub/**: Центральный модуль, координирующий взаимодействие между агентами.
- **config.py**: Конфигурационный файл, где определяются API-ключи, параметры стратегии и настройки агентов.
- **data/**: Папка для хранения исторических данных для анализа и бэктестинга.
- **models/**: Папка для хранения обученных моделей для самообучающихся агентов.
- **strategies/**: Папка, содержащая реализацию торговой стратегии GOAT.
- **utils/**: Вспомогательные функции для загрузки данных и управления рисками.
- **main.py**: Основной скрипт для запуска торгового бота.
- **requirements.txt**: Файл со списком зависимостей для установки всех необходимых библиотек.

## Установка и Настройка

### 1. Установка Python
Убедитесь, что у вас установлена версия Python 3.9, предпочтительно **Python 3.9.13**. 
Скачать Python можно с [официального сайта Python](https://www.python.org/downloads/release/python-3913/).

### 2. Создание виртуального окружения
Для управления зависимостями создайте виртуальное окружение:
```bash
python -m venv goat_trader_env
```

### 3. Активация виртуального окружения
- **На Windows**:
  ```bash
  goat_trader_env\Scripts\activate
  ```
- **На macOS/Linux**:
  ```bash
  source goat_trader_env/bin/activate
  ```

### 4. Установка зависимостей
Установите все необходимые зависимости из файла `requirements.txt`:
```bash
pip install -r requirements.txt
```

### 5. Настройка Конфигурации
Откройте файл `config.py` и укажите следующие параметры:
- **API_KEY** и **API_SECRET**: Ваши API-ключ и секретный ключ для доступа к Binance.
- **BASE_URL**: URL-адрес Binance API.
- **STRATEGY_PARAMETERS**: Параметры стратегии, такие как `risk_reward_ratio`, `max_loss`, `timeframe`, и `symbol`.
- **AGENT_SETTINGS**: Настройки агентов, такие как толерантность к риску и порог сентимента.

Пример содержимого `config.py`:
```python
API_KEY = "your_api_key"
API_SECRET = "your_api_secret"
BASE_URL = "https://api.binance.com"

# Параметры стратегии
STRATEGY_PARAMETERS = {
    "risk_reward_ratio": 3,
    "max_loss": 0.01,
    "timeframe": "1h",
    "symbol": "BTCUSDT",
}

# Настройки агентов
AGENT_SETTINGS = {
    "risk_tolerance": 0.01,
    "sentiment_threshold": 0.5,
}
```

## Запуск и Тестирование Проекта

### 1. Запуск основного скрипта
Запустите проект, выполнив основной скрипт `main.py`:
```bash
python main.py
```

### 2. Проверка логов
В ходе работы бота вы должны видеть логи, указывающие действия агентов, например:
- Сигналы на покупку или продажу, сгенерированные `TradingAgent`.
- Расчёт позиции и уровень риска от `RiskAgent`.
- Анализ сентимента новостей от `SentimentAgent`.
- Исполнение сделок `ExecutorAgent`.

### 3. Тестирование агентов
Перед использованием бота на реальном счёте рекомендуется проверить каждого агента на тестовых данных:
- **TradingAgent**: Генерирует сигналы на основе стратегии GOAT и машинного обучения.
- **RiskAgent**: Управляет размером позиции и корректирует параметры риска.
- **DataAgent**: Загружает исторические и текущие данные с Binance.
- **SentimentAgent**: Анализирует сентимент новостей.
- **ExecutorAgent**: Исполняет ордера на Binance.

## Рекомендации по Тестированию и Обучению

1. **Эмуляция и Бэктестинг**: Протестируйте бота на исторических данных, чтобы оценить его поведение в разных рыночных условиях.
2. **Переобучение моделей**: Регулярно переобучайте самообучающихся агентов на новых данных.
3. **Мониторинг и Логирование**: Включите логирование для отслеживания работы агентов.

## Важные Примечания

- **Реальная Торговля**: Перед использованием на реальных средствах протестируйте систему с минимальным балансом или на тестовом аккаунте Binance.
- **Обновления Моделей**: Регулярно обновляйте модели, чтобы агенты могли адаптироваться к изменяющимся рыночным условиям.
- **Контроль Рисков**: Настройте параметры `RiskAgent` для минимизации рисков.

---

## Лицензия

Этот проект предназначен для образовательных целей и не предназначен для использования в реальной торговле без предварительного тестирования.


Этот код настраивает логирование, чтобы выводить сообщения с уровнем INFO и выше в формате время - уровень - сообщение.

Класс DataAgent:

python
Копировать код
class DataAgent:
    def get_data(self, symbol, timeframe):
        try:
            raw_data = fetch_historical_data(symbol, timeframe)
            if not raw_data or len(raw_data) < 2:
                raise ValueError(f"Недостаточно данных для {symbol}")
            return parse_data(raw_data)
        except Exception as e:
            logging.error(f"Ошибка при получении данных для {symbol}: {e}")
            return []
Этот агент отвечает за получение исторических данных для выбранного символа (symbol) и временного интервала (timeframe). В случае ошибки он логирует её и возвращает пустой список, чтобы предотвратить срывы выполнения основного кода.

Класс TradingAgent:

python
Копировать код
class TradingAgent:
    def __init__(self):
        self.strategy = GOATStrategy(
            risk_reward_ratio=config.STRATEGY_PARAMETERS["risk_reward_ratio"],
            max_loss=config.STRATEGY_PARAMETERS["max_loss"]
        )
    
    def generate_signal(self, data):
        return self.strategy.generate_signal(data)
    
    def calculate_levels(self, last_close):
        stop_loss = self.strategy.calculate_stop_loss(last_close)
        take_profit = self.strategy.calculate_take_profit(last_close)
        return stop_loss, take_profit
Этот агент реализует торговую стратегию GOAT. Он генерирует сигналы (покупка, продажа или удержание) и рассчитывает уровни стоп-лосса и тейк-профита на основе текущей цены last_close.

Класс RiskAgent:

python
Копировать код
class RiskAgent:
    def calculate_risk(self, balance, last_close, stop_loss):
        return apply_risk_management(balance, last_close, stop_loss)
Этот агент управляет рисками, рассчитывая количество актива для покупки или продажи, основываясь на текущем балансе (balance), цене закрытия (last_close) и уровне стоп-лосса (stop_loss).

Класс ExecutorAgent:

python
Копировать код
class ExecutorAgent:
    def execute_trade(self, symbol, side, quantity):
        execute_order(symbol, side, quantity)
Этот агент отвечает за выполнение торговых операций. Он отправляет ордера на биржу, используя функцию execute_order.

Класс MonitoringAgent:

python
Копировать код
class MonitoringAgent:
    def __init__(self):
        self.positions = {}

    def update_position(self, symbol, side, quantity):
        if side == "BUY":
            self.positions[symbol] = self.positions.get(symbol, 0) + quantity
        elif side == "SELL":
            self.positions[symbol] = self.positions.get(symbol, 0) - quantity
        if self.positions[symbol] == 0:
            del self.positions[symbol]

    def log_positions(self):
        logging.info(f"Текущие позиции: {self.positions}")
Этот агент отслеживает и обновляет текущие позиции. После каждой сделки (BUY или SELL) он обновляет словарь self.positions и логирует текущие позиции.

Функция get_top_200_symbols:

python
Копировать код
def get_top_200_symbols():
    # ...
Эта функция получает топ-200 криптовалют с CoinGecko API по рыночной капитализации. В случае ошибки она логирует её и возвращает пустой список.

Функция process_trade:

python
Копировать код
def process_trade(symbol, signal, last_close, trading_agent, risk_agent, executor_agent, monitoring_agent):
    # ...
Эта функция отвечает за обработку торгового сигнала. В зависимости от сигнала (buy или sell), она рассчитывает стоп-лосс и тейк-профит, определяет количество актива для сделки, выполняет её и обновляет позицию.

Основная функция main():

python
Копировать код
def main():
    # ...
Эта функция инициализирует всех агентов, загружает топ-200 символов и запускает цикл обработки данных для каждого символа. Она также отслеживает позиции, записывает действия и делает паузы между итерациями для предотвращения частых запросов к API.